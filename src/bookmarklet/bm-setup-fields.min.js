!function(){function e(e,r){return e.indexOf(r)>-1}if(location.href.indexOf("mousehuntgame.com")<0)alert("You are not on mousehuntgame.com! Please try again.");else if(user){var r,t=user.environment_name,a=user.base_name,n={};n.location=t,n.weapon=user.weapon_name,n.base=a,n.charm=user.trinket_name,n.rank=(r=user.title_name).indexOf("Archduke")>=0||r.indexOf("Archduchess")>=0?"archduke":r.indexOf("Grand Duke")>=0||r.indexOf("Grand Duchess")>=0?"grandduke":r.indexOf("Duke")>=0||r.indexOf("Duchess")>=0?"duke":r.indexOf("Count")>=0||r.indexOf("Countess")>=0?"count":r.indexOf("Baron")>=0||r.indexOf("Baroness")>=0?"baron":r.indexOf("Lord")>=0||r.indexOf("Lady")>=0?"lord":r.indexOf("Journeyman")>=0||r.indexOf("Journeywoman")>=0?"journeyman":r.toLowerCase(),user.has_shield||(n.gs="No"),n.power_bonus=Math.round(100*user.trap_power_bonus);var i=document.querySelector(".campPage-trap-trapStat.luck > .value");n.total_luck=i&&i.textContent?Number(i.textContent):user.trap_luck;var s=user.bait_name,u=function(r,t){var a=user.quests,i=user.viewing_atts;if("Balack's Cove"===r){var u=i.tide;if("low"===u)return"Low Tide";if("med"===u)return"Medium Tide";if("high"===u)return"High Tide"}else{if("Burroughs Rift"===r){var o=a.QuestRiftBurroughs.mist_tier;return"Undead String Emmental"===s?s:{tier_0:"Mist Level 0",tier_1:"Mist Level 1-5",tier_2:"Mist Level 6-18",tier_3:"Mist Level 19-20"}[o]}if("Fiery Warpath"===r)return"Wave "+i.desert_warpath.wave;if("Fort Rox"===r){var l=a.QuestFortRox,c=l.current_phase;return"day"===c?"Day":"dawn"===c?"Dawn":"night"===c?{stage_one:"Twilight",stage_two:"Midnight",stage_three:"Pitch",stage_four:"Utter Darkness",stage_five:"First Light"}[R=l.current_stage]:c}if("Gnawnian Express Station"===r){if(a.QuestTrainStation.on_train){var h=i.tournament.minigame,d=h.name;if("Supply Depot"===d){var f=h.supply_hoarder_turns;if(f>0)return"Supply Depot (Supply Rush)";if(0===f)return"Supply Depot (No Supply Rush)"}else if("Raider River"===d||"Daredevil Canyon"===d)return d}}else{if("Iceberg"===r){var g=a.QuestIceberg.current_phase;return"General"===g?"Generals":"Treacherous Tunnels"!==g&&"The Mad Depths"!==g||"Magnet Base"!==t?"The Mad Depths"===g&&"Hearthstone Base"===t?g+" (Hearthstone)":"Bombing Run"===g&&"Remote Detonator Base"===t?g+" (Remote Detonator)":"Treacherous Tunnels"!==g&&"Bombing Run"!==g&&"The Mad Depths"!==g||"Ultimate Iceberg Base"!==t?g:g+" (Ultimate Iceberg)":g+" (Magnet)"}if("Labyrinth"===r){var m=a.QuestLabyrinth.hallway_name;return e(m,"Short")?m=m.slice(6,m.length):e(m,"Medium")?m=m.slice(7,m.length):e(m,"Long")&&(m=m.slice(5,m.length)),m=m.slice(0,m.indexOf(" Hallway"))}if("Living Garden"===r){if("dumped"===a.QuestLivingGarden.minigame.bucket_state)return"Poured"}else if("Moussu Picchu"===r){var _=a.QuestMoussuPicchu.elements,p=_.storm.level;switch(p){case"high":p="max";break;case"medium":p="high";break;case"low":_.rain.percent>=35&&_.wind.percent>=35&&(p="medium")}if("none"!==p)return"Storm "+p;if("up"===_.rain.direction)return"Rain "+_.rain.level;if("up"===_.wind.direction)return"Wind "+_.wind.level}else if("Twisted Garden"===r){if("dumped"===a.QuestLivingGarden.minigame.vials_state)return"Poured"}else if("Lost City"===r){if(1===a.QuestLostCity.minigame.is_cursed)return"Cursed"}else if("Cursed City"===r){if(a.QuestLostCity.minigame.is_cursed)return"Cursed"}else if("Sand Dunes"===r){if(a.QuestSandDunes.minigame.has_stampede)return"Stampede"}else{if("Seasonal Garden"===r)return{fl:"Fall",wr:"Winter",sg:"Spring",sr:"Summer"}[i.season];if("Sunken City"===r)return"Sunken City"===(g=a.QuestSunkenCity.zone_name)&&(g="Docked"),g;if("Toxic Spill"===r){var v=a.QuestPollutionOutbreak.titles,y={archduke_archduchess:"Archduke/Archduchess",grand_duke:"Grand Duke/Grand Duchess",duke_dutchess:"Duke/Duchess",count_countess:"Count/Countess",baron_baroness:"Baron/Baroness",lord_lady:"Lord/Lady",hero:"Hero",knight:"Knight"};for(var w in v)v.hasOwnProperty(w)&&v[w].active&&(g=y[w]);return g}if("Whisker Woods Rift"===r){var b=a.QuestRiftWhiskerWoods.zones,k="";return k=(k=(k=(k+=b.clearing.status+"/"+b.tree.status+"/"+b.lagoon.status).replace(/low/g,"Low")).replace(/high/g,"Medium")).replace(/boss/g,"High")}if("Zokor"===r){var C=a.QuestAncientCity,S=C.district_name,Q=C.clue_name,x=C.district_tier;return e(S,"Minotaur")?"Lair of the Minotaur":{Tech:["Tech Foundry Outskirts","Tech Research Center","Manaforge"],Scholar:["Neophyte Scholar Study","Master Scholar Auditorium","Dark Library"],Fealty:["Outer Fealty Shrine","Inner Fealty Temple","Templar's Sanctum"],Treasury:["Treasure Room","Treasure Vault"],Farming:["Farming Garden","Overgrown Farmhouse"]}[Q][x-1]}if("Furoma Rift"===r)return a.QuestRiftFuroma.droid.charge_level?"Pagoda":"Training Grounds";var R;if("Bristle Woods Rift"===r)return(R=[]).push(a.QuestRiftBristleWoods.chamber_name),"active"===a.QuestRiftBristleWoods.status_effects.ng&&R.push("(Paladin's Bane)"),"active"===a.QuestRiftBristleWoods.status_effects.st&&R.push("(Pursued)"),R.join(" ");if("Zugzwang's Tower"===r){var T=i.zzt_mage_progress,O=i.zzt_tech_progress;if(T>=O){if(T>=0&&T<8)return"Mystic Pawn Pincher";if(T>=8&&T<10)return"Mystic Knights";if(T>=10&&T<12)return"Mystic Bishops";if(T>=12&&T<14)return"Mystic Rooks";if(14===T)return"Mystic Queen";if(15===T)return"Mystic King";if(T>=16)return"Chess Master"}else{if(O>=0&&O<8)return"Technic Pawn Pincher";if(O>=8&&O<10)return"Technic Knights";if(O>=10&&O<12)return"Technic Bishops";if(O>=12&&O<14)return"Technic Rooks";if(14===O)return"Technic Queen";if(15===O)return"Technic King";if(O>=16)return"Chess Master"}}else if("Claw Shot City"===r){var M=a.QuestClawShotCity.map_active,F=a.QuestClawShotCity.has_wanted_poster;if(!M)return"No Wanted Poster Open";if(M&&!F)return"Crew"}else{if("Mousoleum"===r)return a.QuestMousoleum.has_wall?"Has Wall":"No Wall";if("Queso Geyser"===r){var B=a.QuestQuesoGeyser.state;if("collecting"===B)return"Cork Collecting";if("corked"===B)return"Pressure Building";if("eruption"===B)return a.QuestQuesoGeyser.state_name}else{if("Forbidden Grove"===r)return user.viewing_atts.grove_open?"Open":"Closed";if("Harbour"===r)return"searchStarted"!==a.QuestHarbour.status||a.QuestHarbour.can_claim?"No Bounty":"On Bounty";if("Valour Rift"===r){if("farming"===a.QuestRiftValour.state)return"Outside";if("tower"===a.QuestRiftValour.state){var D=a.QuestRiftValour.floor_type;n.vrFloorType=D>=1&&D<=7?D-1:0;var L=a.QuestRiftValour.floor||1,G=a.QuestRiftValour.is_eclipse_mode?"Umbra ":"";return L%8==0?G+="Eclipse":L<=7?G+="Floors 1-7":L<=15?G+="Floors 9-15":L<=23?G+="Floors 17-23":L>=25&&(G+="Floors 25-31+"),G}}}}}}}return"N/A"}(t,a);!function(e,r,t){var a=user.quests;if("Furoma Rift"===e){var n=a.QuestRiftFuroma.droid.charge_level;""!==n&&(r.battery={charge_level_one:1,charge_level_two:2,charge_level_three:3,charge_level_four:4,charge_level_five:5,charge_level_six:6,charge_level_seven:7,charge_level_eight:8,charge_level_nine:9,charge_level_ten:10}[n])}else if("Labyrinth"===e)"active"===a.QuestLabyrinth.lantern_status&&(r.oil="On");else if("Fort Rox"===e){var i=a.QuestFortRox.fort;r.ballistaLevel=i.b.level,r.cannonLevel=i.c.level}else"Zugzwang's Tower"===e?r.amplifier=user.viewing_atts.zzt_amplifier:"Sand Crypts"===e&&(r.saltLevel=a.QuestSandDunes.minigame.salt_charms_used)}(t,n),s&&(e(s,"Empowered")&&(s=s.slice(6,s.length),n.empowered="Yes"),s.indexOf("SUPER|brie+")>=0?s="SB+":s.indexOf(" Cheese")>=0?e(s,"Gauntlet")&&"Gauntlet String Cheese"!==s?u=s=s.slice(16,s.length):s=s.slice(0,s.indexOf(" Cheese")):"Fusion Fondue"===s&&(n.location="M400 Hunting"),n.cheese=s),"N/A"!==u&&(n.phase=u),"Denture Base"===n.base&&document.querySelector(".mousehuntHud-userStat.trap.base > .icon").getAttribute("style").indexOf("vteeth")>=0&&(n.base="Denture Base (Toothlet Charged)"),"Prestige Base"===n.base&&(n.umbraFloor=0,document.querySelectorAll(".campPage-trap-trapStat-mathRow-name").forEach(e=>{e.textContent.indexOf("(Highest Umbra Floor")>=0&&(n.umbraFloor=+e.textContent.split("(Highest Umbra Floor: ")[1].split(")")[0])})),n.weapon.indexOf("Golem Guardian")>=0&&(n.weapon="Golem Guardian "+user.trap_power_type_name+" Trap"),n.weapon.indexOf("Golem Guardian")>=0?$.post("https://www.mousehuntgame.com/managers/ajax/users/gettrapcomponents.php",{hg_is_ajax:1,uh:user.unique_hash},null,"json").done(function(e){if(e.components){var r=e.components.filter(function(e){return"snow_golem_trap_weapon"===e.component_type}),t=[0,0,0,0,0];for(var a of r)switch(a.power_type_name){case"Arcane":t[0]=a.golem_guardian_charge_percentage||0;break;case"Forgotten":t[1]=a.golem_guardian_charge_percentage||0;break;case"Hydro":t[2]=a.golem_guardian_charge_percentage||0;break;case"Physical":t[3]=a.golem_guardian_charge_percentage||0;break;case"Tactical":t[4]=a.golem_guardian_charge_percentage||0}n.golem_charge=t,o(n)}}):o(n)}else alert("User object not found.");function o(e){var r="https://tsitu.github.io/MH-Tools/setup.html?";for(var t in e){var a=encodeURIComponent(e[t]);"golem_charge"===t&&(a="%5B"+a+"%5D"),r+=t+"="+a+"&"}window.open("","mhsetup").location=r}}();