!function(){var e=["Bronze","Silver","Gold","Platinum","Diamond"],t={Bronze:[1,1,9],Silver:[90,10,99],Gold:[400,100,499],Platinum:[750,500,999],Diamond:[2e3,1e3,2499]};!function n(){if(window.jQuery){document.querySelectorAll(".mht-crown-solver").forEach(function(e){e.remove()});var o={bronze:[],silver:[],gold:[],platinum:[],diamond:[]},a=localStorage.getItem("mh-catch-stats");if(a){var r=JSON.parse(a);for(var l in r){var c=l,d=l.indexOf(" Mouse");if(d>0&&(c=l.slice(0,d)),"Leprechaun"!==c&&"Mobster"!==c){"Dread Pirate"===c&&(c="Dread Pirate Mousert"),c.indexOf("Thunderlord")>=0&&(c="Thunderlord");var i=r[l];i<10?o.bronze.push([c,i]):i<100?o.silver.push([c,i]):i<500?o.gold.push([c,i]):i<1e3?o.platinum.push([c,i]):i<2500&&o.diamond.push([c,i])}}}var m=document.createElement("div");m.className="mht-crown-solver";var s=document.createElement("button");s.innerText="x",s.onclick=function(){document.body.removeChild(m)};var p=document.createElement("span");p.style.fontSize="15px",p.style.fontWeight="bold",p.appendChild(document.createTextNode("Crown Solver Bookmarklet"));var u=document.createElement("span");u.innerHTML="Select desired crown types and cutoff values";var h,v=document.createElement("table");v.style.textAlign="left";var f=localStorage.getItem("tsitu-bm-crown");f&&(h=JSON.parse(f));for(var b=0;b<e.length;b++){var x=e[b],y=x.toLowerCase(),C=document.createElement("span");C.className="mht-crown-solver span-"+y;var E=document.createElement("input");E.type="checkbox",E.className="mht-crown-solver box-"+y,E.name="mht-crown-solver box-"+y,h&&(E.checked=h[y][0]);var g=document.createElement("label");g.className="mht-crown-solver",g.htmlFor="mht-crown-solver box-"+y,g.innerText=x,C.appendChild(E),C.appendChild(g);var w=document.createElement("input");w.type="number",w.style.width="50px",w.defaultValue=t[x][0],w.min=t[x][1],w.max=t[x][2],w.className="mht-crown-solver cutoff-"+y,w.name="mht-crown-solver cutoff-"+y,h&&(w.value=h[y][1]);var S=document.createElement("tr"),k=document.createElement("td");k.style.paddingLeft="35px",k.style.paddingRight="20px";var N=document.createElement("td");k.appendChild(C),N.appendChild(w),S.appendChild(k),S.appendChild(N),v.appendChild(S)}var T=document.createElement("input");T.type="checkbox",T.className="mht-crown-solver box-all",T.name="mht-crown-solver box-all",T.onclick=function(){document.querySelector(".mht-crown-solver.box-all").checked?document.querySelectorAll("input.mht-crown-solver[type='checkbox']:not(.box-all)").forEach(function(e){e.checked||(e.checked=!0)}):document.querySelectorAll("input.mht-crown-solver[type='checkbox']:not(.box-all)").forEach(function(e){e.checked&&(e.checked=!1)})};var A=document.createElement("label");A.className="mht-crown-solver",A.htmlFor="mht-crown-solver box-all",A.innerText="All";var I=document.createElement("button");I.innerText="Revert",I.onclick=function(){document.querySelectorAll("input.mht-crown-solver[type='number']").forEach(function(e){var n=e.className.split("cutoff-")[1],o=n.charAt(0).toUpperCase()+n.slice(1);e.value=t[o][0]})};var q=document.createElement("tr"),z=document.createElement("td");z.style.paddingLeft="35px",z.style.paddingRight="20px",z.appendChild(T),z.appendChild(A);var O=document.createElement("td");O.appendChild(I),q.appendChild(z),q.appendChild(O),v.appendChild(q);var F=document.createElement("span");F.style.fontSize="12px";var j="Catches last updated: N/A",D=localStorage.getItem("mh-catch-stats-timestamp");D&&(j="Catches last updated:\n"+new Date(parseInt(D)).toLocaleString()),F.innerText=j;var L=document.createElement("button");L.style.fontWeight="bold",L.style.fontSize="16px",L.innerText="Go!",L.onclick=function(){if(a){var e={};document.querySelectorAll("input.mht-crown-solver[type='checkbox']:not(.box-all)").forEach(function(n){if(n.checked){var a=n.className.split("box-")[1],r=a.charAt(0).toUpperCase()+a.slice(1),l=parseInt(document.querySelector(".mht-crown-solver.cutoff-"+a).value);if(l>=t[r][1]&&l<=t[r][2])for(var c=0;c<o[a].length;c++){var d=o[a][c];d[1]>=l&&(e[d[0]]=d[1])}}});var n=Object.keys(e).length;if(0===n)alert("No valid mice to send");else{var r=!0;if(n>=100&&(r=!1,confirm("100 or more mice are about to be sent. Proceed?")&&(r=!0)),r){var l=window.open("");l.name=JSON.stringify(e),l.location="https://tsitu.github.io/MH-Tools/crown.html"}}}else alert("No catch data found. Please click the 'Fetch' button")};var P=document.createElement("button");P.innerText="Fetch",P.onclick=function(){$.post("https://www.mousehuntgame.com/managers/ajax/users/profiletabs.php?action=badges&snuid="+user.sn_user_id,{},null,"json").done(function(e){if(e){var t=e.mouse_data,o=e.remaining_mice,a={};Object.keys(t).forEach(function(e){a[t[e].name]=t[e].num_catches}),o.forEach(function(e){var t=e.name.split(" (");a[t[0]]=parseInt(t[1][0])}),localStorage.setItem("mh-catch-stats",JSON.stringify(a)),localStorage.setItem("mh-catch-stats-timestamp",Date.now()),n()}})};var J=document.createElement("button");J.innerText="Save",J.onclick=function(){var e={bronze:[void 0,void 0],silver:[void 0,void 0],gold:[void 0,void 0],platinum:[void 0,void 0],diamond:[void 0,void 0]};document.querySelectorAll("input.mht-crown-solver[type='checkbox']:not(.box-all)").forEach(function(t){var n=t.className.split("box-")[1];e[n][0]=t.checked}),document.querySelectorAll("input.mht-crown-solver[type='number']").forEach(function(t){var n=t.className.split("cutoff-")[1];e[n][1]=t.value}),localStorage.setItem("tsitu-bm-crown",JSON.stringify(e))},m.appendChild(s),m.appendChild(document.createElement("br")),m.appendChild(document.createElement("br")),m.appendChild(p),m.appendChild(document.createElement("br")),m.appendChild(u),m.appendChild(document.createElement("br")),m.appendChild(document.createElement("br")),m.appendChild(v),m.appendChild(document.createElement("br")),m.appendChild(F),m.appendChild(document.createElement("br")),m.appendChild(document.createElement("br")),m.appendChild(L),m.appendChild(document.createTextNode(" ")),m.appendChild(P),m.appendChild(document.createTextNode(" ")),m.appendChild(J),m.style.backgroundColor="#F5F5F5",m.style.position="fixed",m.style.zIndex="9999",m.style.left="57%",m.style.top="88px",m.style.border="solid 3px #696969",m.style.borderRadius="20px",m.style.padding="10px",m.style.textAlign="center",document.body.appendChild(m)}else alert("Error: jQuery is not enabled on this page")}()}();